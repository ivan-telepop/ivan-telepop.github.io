---
title: "Две системы на Маке - MacBook Pro с двумя операционками MacOS и Ubuntu. "
publishedAt: "2025-11-17"
summary: "Админские будни, MacBook Pro с двумя операционками MacOS и Ubuntu."
tags: "macbook, linux, SSD, partitioning"
image: "/photos/macbook.jpg"
---





>  "Не так давно пришлось "снести" систему на моем MacBook Pro, как альтернативу поставил "Linux Ubuntu 24.04". 
>  Все ок для разработки, но для мультимедиа дел все таки поинтересней будет MacOS! 
>  На Ubuntu не поставишь Ableton Live и VST плагины и нужный софт.
>  Решил установить две ОС для удобства. "





### Обзор шагов

- Восстановление MacOS из Internet Recovery Tool на MacBook Pro.

- Обновление системы, подготовка системы.

- Загрузка образа `Ubuntu` с оффициального сайта Linux.

- Установка Balena Etcher GUI на MacOS.

- Создание загрузочной флешки USB.

- Разметка диска на партиции из Дисковой Утилиты MacOS.

- Установка Ubuntu в качестве второй ОС.

- Настройка Ubuntu и установка драйверов, подсветка, трекпэд, кнопки.


---

#### 1 - Подготовка: 

У вас в наличии должна быть флешка не менее 8 ГБ, и хороший канал интернет.

---

### MacOS установка через Internet Recovery.

Выключаем компьютер, снова включаем с зажатой клавишей 'Command' + 'Shift' + 'D' 
до тех пор пока не появится земной "шарик" с диалог выбора WiFi сети. 

<img src="/photos/internetrecovery.jpg" alt="Internet Recovery" width="200" />

Выбираем свою любимую сеть, и подключаемся как можно надежнее. 

Далее появится диалоговое окно 'macOS Utilities' с выбором нескольких пунктов. 
Нам нужно выбрать - 'Reinstall MacOS'.
далее все просто, вам система задает вопросы, вы отвечаете до тех пор пока не запустится ваша новая операционная система.

<img src="/photos/macos-utils.png" alt="MacOS Utilities" width="300" />

---


Я решил установить все обновления на свеже установленной системе, обновить MacOS до последней возможной версии, а после приступать к следующим шагам. 
Тут решайте сами, как говорится - на свое усмотрение !

---

#### 2 - Создание новой партиции:

Находим в меню MacOS дисковую утилиту, открываем ее и выделяем наше устройство хранения данных.
В моем случае это SSD на 500 ГБ. Выделив устройство жмем на кнопку 'Partitioning'.


<img src="/photos/partitioning-2.png" alt="disk partitioning" width="400" />

Нажимаем на '+', так мы добавляем новый раздел на диске. Необходимо указать в поле 'Size' размер нового пространства , 
и файловую систему лучше 'NTFS', но не в коем случае не  'APFS'  хотя позднее оно будет отформатированно в 'ext4' при установке Ubuntu.
Жмем 'Apply', нас попросят подождать. Ждем...


#### 3 - Создание USB flash drive с Ubuntu:

На оффициальном сайте Balena Etcher скачаем dmg для установки программы для создания флешек. Там все очень просто!
Указываем носитель, указываем архив на нашу вторую ОС...

#### 4 - Ubuntu installation.

Получив готовый USB установщик выключаемся, вставляем в порт флешку, включаем компьютер, держем 'alt' пока не появится выбор запуска.
Выделяем нашу флешку с надписью 'UEFI bla-bla-bla', и грузимся с нее. 
Важно при установке Linux указать получение дополнительных проприетарных драйверов для оборудования. 
Но в любом случае нам придется ставить кое что дополнительно. Но это не сложно !
Отказываемся от автоматической установки чтоб не проскочить мимо выбора нужного раздела на диске.


#### 5 - Форматируем раздел с Ubuntu.

И так мы добрались до места гда нам важно правильно указать раздел для установки второй Linux ОС.
Выделяем мышкой раздел который мы из MacOS Disk Utility форматировали в NTFS. Его будет сложно спутать с APFS.
Держим в голове что APFS это диск нашей MacOS машины. Его нельзя удалять !
Выделяем и форматируем в ext4. 
Mount Point должен быть "слеш" - '/' ... Просто слеш !
Format - 'ext4'

<img src="/photos/ubuntu-partitioning.png" alt="Linux disk choice" width="400" />

Потом 'OK', затем 'Install Now'... Установка второй ОС началась !


---


#### Hастройка трекпэда, подсветок экрана, клавиш на новой Linux OS.


Клонируем репозиторий 'BCE(Buffer Copy Engine) module for Keyboard and Audio'

```
sudo git clone https://github.com/t2linux/apple-bce-drv /usr/src/apple-bce-r183.c884d9c
```

Создаем файл dkms.conf в `/usr/src/apple-bce-r183.c884d9c` и вставляем контент:

```
PACKAGE_NAME="apple-bce"
PACKAGE_VERSION="r183.c884d9c"
MAKE[0]="make KVERSION=$kernelver"
CLEAN="make clean"
BUILT_MODULE_NAME[0]="apple-bce"
DEST_MODULE_LOCATION[0]="/kernel/drivers/misc"
AUTOINSTALL="yes"
```

Теперь запускаем команду и ставим apple-bce.

```
sudo dkms install -m apple-bce -v r183.c884d9c
```



Потом для 'Touchbar and Ambient Light sensor modules'

```
git clone https://github.com/t2linux/apple-ib-drv /usr/src/apple-ibridge-0.1
```

Установка выглядит так 

```
sudo dkms install -m apple-ibridge
```


Перезапускаем сессию... Все работает !







